# Find Convex Hull 2D

## 概要

Find Convex Hull 2Dノードは、XY平面上のポイントセットの2D凸包（Convex Hull）を計算します。入力ポイントを囲む最小の凸多角形のポイントを返します。

## 機能詳細

このノードは、与えられたポイントセットから、XY平面（Z軸を無視）での2D凸包を計算します。凸包とは、すべてのポイントを含む最小の凸多角形です。

### 処理フロー

1. **入力ポイントの取得**: ポイントデータを入力から取得
2. **XY平面への投影**: Z座標を無視してXY平面上で処理
3. **凸包の計算**: 凸包アルゴリズムを適用
4. **凸包ポイントの出力**: 凸包を構成するポイントのみを出力

### 凸包アルゴリズム

一般的に、Graham Scan、Jarvis March、またはQuickHullなどのアルゴリズムが使用されます（実装の詳細に依存）。

## プロパティ

このノードにはユーザー設定可能なプロパティはありません。入力ポイントから自動的に凸包を計算します。

## 使用例

### 基本的な使用方法

```
Create Points Grid (ランダムなポイント)
  → Find Convex Hull 2D
  → Create Spline (凸包の輪郭をスプラインとして作成)
```

ランダムなポイントの外周を囲むスプラインを生成

### 領域の境界定義

```
Get Landscape Data
  → Surface Sampler (サンプリング)
  → Find Convex Hull 2D
  → Create Surface From Spline
```

サンプリングされたポイントの凸包から、簡略化された領域サーフェスを作成

### ポイントクラウドの境界

```
Point From Mesh (メッシュからポイントを抽出)
  → Find Convex Hull 2D
  → (凸包ポイントを使用して境界を可視化)
```

### 典型的な用途

- **境界定義**: ポイント群の外周を定義
- **単純化**: 複雑なポイント群を凸多角形に単純化
- **衝突検出**: 簡略化された境界を使用
- **領域抽出**: 配置されたオブジェクトの外周領域を取得

## 実装の詳細

### クラス構成

```cpp
// 設定クラス
class UPCGConvexHull2DSettings : public UPCGSettings

// 実行エレメント
class FPCGConvexHull2DElement : public IPCGElement
```

### ピン構成

**入力ピン**:
- デフォルトのポイント入力ピン
- ポイントデータまたはベースポイントデータ

**出力ピン**:
- デフォルトのポイント出力ピン
- 凸包を構成するポイントのみ

### 実行ループモード

- **Mode**: `EPCGElementExecutionLoopMode::SinglePrimaryPin`
- 各入力データに対して個別に凸包を計算

### ベースポイントデータサポート

- **サポート**: はい (`SupportsBasePointDataInputs = true`)
- AttributeSet、Surface、Volumeなどの暗黙的なポイントデータにも対応

### 2D処理

- XY平面上でのみ計算
- Z座標は凸包の計算には使用されないが、出力ポイントには保持される可能性がある

### パフォーマンス考慮事項

- **計算量**: O(n log n) ~ O(n²)（アルゴリズムに依存）
- **ポイント数**: 大量のポイントでは計算コストが増加
- **出力ポイント数**: 入力ポイント数よりも通常大幅に少ない（凸包のみ）

## 注意事項

1. **2D処理**: XY平面での処理のため、Z座標は凸包の計算には影響しません
2. **Z-Up**: 現在はZ-Up（Z軸が上）のサーフェスのみをサポート
3. **ポイントの削減**: 出力は凸包を構成するポイントのみで、内部のポイントは除外されます
4. **順序**: 出力ポイントは凸包の輪郭に沿った順序で配列される可能性があります
5. **退化ケース**: すべてのポイントが一直線上にある場合、2つのポイントのみが返される可能性があります

## 数学的背景

凸包（Convex Hull）は、与えられたポイントセットPに対して、以下を満たす最小の凸集合です:
- すべてのポイントがその凸集合に含まれる
- 任意の2点を結ぶ線分が完全にその集合内に含まれる

## 関連ノード

- **Create Spline**: 凸包ポイントからスプラインを作成
- **Create Surface From Spline**: 凸包の内部をサーフェスとして定義
- **Bounds From Mesh**: メッシュの境界を取得
- **Clean Spline**: スプラインのクリーンアップ

## 実装ファイル

- **ヘッダー**: `Engine/Plugins/PCG/Source/PCG/Public/Elements/PCGConvexHull2D.h`
- **実装**: `Engine/Plugins/PCG/Source/PCG/Private/Elements/PCGConvexHull2D.cpp`
- **カテゴリ**: Spatial
